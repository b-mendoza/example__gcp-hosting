steps:
  # Install
  - name: 'node:lts-alpine'
    entrypoint: 'npm'
    args: ['ci', '--no-audit', '--no-fund']

  # Lint
  - name: 'node:lts-alpine'
    entrypoint: 'npm'
    args: ['run', 'lint']

  # Test
  - name: 'node:lts-alpine'
    entrypoint: 'npm'
    args: ['run', 'test']

  # Build
  - name: 'node:lts-alpine'
    entrypoint: 'npm'
    args: ['run', 'build']

  # Set GCP Project - Add env. variable to hide projectId
  - name: 'gcr.io/google.com/cloudsdktool/cloud-sdk:alpine'
    args: ['gcloud', 'config', 'set', 'project', 'paybotic-example-setup']

  # Hosting - Actualizar a env variable para quitar bucket name del yaml
  # - name: 'gcr.io/google.com/cloudsdktool/cloud-sdk:latest'
  #   args: ["gcloud", "alpha", "storage", "rm", "--recursive", "gs://example-paybotic-storage/**"]

  # Bucket Sync - Add env. variable to hide bucket name
  - name: 'gcr.io/google.com/cloudsdktool/cloud-sdk:alpine'
    args: ['gsutil', 'cp', '-r', 'dist/*', 'gs://example-paybotic-storage']
